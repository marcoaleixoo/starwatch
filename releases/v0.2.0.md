## v0.2.0 — GUI & Mundo Maior (em progresso)

Foco: experiência do jogador, base de GUI e um setor muito maior com geração procedural consistente.

Principais mudanças
- Câmera “Seguir” a nave: novo botão no painel de Naves. Alterna entre Seguir/Seguindo. Usa `ArcRotateCamera.lockedTarget` para manter o foco durante a navegação.
- Foco por clique: clicar em asteroides/nave foca a câmera neles (limpa o modo seguir quando acionado). Já existia parcialmente; foi refinado e integrado ao fluxo.
- Setor significativamente maior: `bounds` do setor passou para ~6000 km de raio. A densidade de objetos foi recalibrada para performance, com mais clusters espalhados e fundo esparso.
- Velocidade da nave escalonada: ajustada dinamicamente para levar ~30 min para cruzar o setor de ponta a ponta (diâmetro). O cálculo é proporcional ao tamanho do setor.
- Scanner com alcance relativo ao setor: raio de varredura agora escala com `bounds` (mantém utilidade local em mapas grandes).
- Artefatos de cenário escalados: skybox, poeira espacial e posição/tamanho do sol agora consideram o tamanho do setor.
- Modo Mapa do Setor preserva estado: ao entrar no mapa, follow é desligado e restabelecido ao sair.
- Persistência: chave de save migrada para `starwatch.v020.save` para isolar a v0.1.0.
- Painel de Clusters claro: exibe apenas clusters com asteroides já escaneados. Quando nenhum foi descoberto ainda, mostra instrução para se aproximar e escanear. Cada cluster possui botões “Focar” e “Ir”.
- HAL assertivo no scan: ao pedir varredura por um recurso e não existir alvo no raio, o HAL informa explicitamente que não há alvos (sem listas vazias).
- Novo tool `mining_status`: permite ao HAL reportar progresso da mineração e quando um alvo é esgotado.
- Cards de ferramentas no chat: cada tool call aparece como um mini card com o input/output brutos (auditoria e debug amigáveis).

UX/GUI — Iteração atual
- Galaxy Map removido (mock): reduz complexidade e foca no Mapa do Setor.
- HUD superior unificado: Setor + “Mapa do Setor” + grupo “Minérios” (Fe/Si/U) com rótulo e tooltips. Posição/velocidade da nave saem do topo (cada nave exibe sua posição no painel direito).
- Scanner como drawer lateral direito: colapsável, alça persistente, tabs Naves/Clusters, ações “Focar/Seguir”. Altura ajustada para não colidir com topo/rodapé (responsivo) e, por ora, limitada a ~80% do viewport para garantir espaço à barra inferior.
- Handle do drawer redesenhado: botão circular centrado na borda, com sombra suave e setas ‹/›. Painel desce alguns pixels para dar “teco” de respiro no topo.
- Barra de Construções (rodapé): categorias Base/Oxigênio/Energia/Indústria/Defesa. Ao selecionar uma categoria, abre paleta que expande para cima; ao clicar num item, mostra preview/miniatura com descrição, custos (Fe/Si/U) e delta de energia. Botão “Colocar (em breve)” apenas sinaliza; nada é construído ainda.
- Interações refinadas: clicar novamente na categoria fecha a paleta; ESC fecha o item ativo e, se nenhum, fecha a paleta. Toda a barra ocupa a largura total e evita sobreposição com outros painéis.
- Com‑Link: input 100% contido na coluna esquerda (sem “vazar” largura). Cards de tool call reestilizados para 3 linhas (título; Input; Output), responsivos e com caixas de JSON roláveis.
- Ajuste visual dos JSONs: caixas agora têm `box-sizing` e largura máxima para não “vazar” do card.
- Sobreposições corrigidas: z‑index e cálculo dinâmico de alturas via `ResizeObserver` entre HUD superior, drawer e barra de construções.

Notas de implementação
- Core: `src/game/Game.ts` (follow, escala, scanner relativo, assets de fundo, `getMiningStatus()` e log de esgotamento de alvo).
- Mundo: `src/game/world.ts` (bounds e distribuição de clusters/asteroides).
- UI:
  - `src/App.tsx`
    - Remoção completa do Galaxy Map mock.
    - `TopHUD`: HUD consolidado + reporte de altura (para o drawer).
    - `RightDrawer`: drawer colapsável com tabs; altura respeita topo/rodapé e limite ~80vh.
    - `ConstructionBar`: categorias/paleta/preview; reporte de altura para evitar overlap.
  - `src/ui/Chat.tsx`
    - Input com box‑sizing e largura contida.
    - Card de tool call em 3 linhas (título, Input, Output) com JSON rolável.
- HAL/LLM: `src/hal/halLLM.ts` (tool `mining_status`, resposta “sem alvos” no scan e logging dos tool calls no histórico do chat).
